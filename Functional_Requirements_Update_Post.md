3.1.3. Update Post
  
●	Open edit post modal: Access the post edit form through the edit icon (gear) in the actions menu dropdown on a post card to open a modal dialog for editing an existing post. 
●	View existing post data: Display current post content and images pre-filled in the edit form. Content is loaded from post.content and displayed in the text area. Existing images are loaded from PostImage collection and displayed as thumbnail previews with count indicator (e.g., "Thêm ảnh (1)"). 
●	Edit post content: Modify post content in the multi-line text area. Content field is pre-filled with existing post content and can be edited. Content field is required and must not be empty. 
●	Manage images: View existing images as thumbnail previews, add new images through "Chọn ảnh" (Select photos) button with file picker (multiple selection), or remove individual images using remove button (X) on each preview. Image count updates dynamically as images are added or removed (e.g., "Thêm ảnh (1)"). 
●	Validate post content: Ensure post content is not empty before submission. Display error message "Vui lòng nhập nội dung bài viết" (Please enter post content) if content field is empty when attempting to submit. 
●	Check edit permissions: Verify that the current user is the owner of the post before allowing edits. Display error message "Bạn không có quyền sửa bài viết này" (You do not have permission to edit this post) if user is not the post owner. 
●	Detect changes: Compare current post data with edited data to detect if any changes were made (content or images). Only update database if changes are detected. 
●	Update post status: Automatically change post status to 'pending' when post is updated (content or images changed) to require re-approval from school admin. Status remains unchanged if no modifications are detected. 
●	Submit post update: Save changes to the post by clicking the "Cập nhật bài viết" (Update post) button. Existing images are replaced with new image set. New images are uploaded to Cloudinary and saved to database. Post content and status are updated in database. 
●	Cancel post update: Close the edit post modal without saving changes by clicking the "Hủy" (Cancel) button or the close icon (X) in the modal header. All edited content and image changes are discarded when modal is closed. 
●	View loading state: Display loading indicator on the update button ("Đang cập nhật..." - Updating...) while the post is being updated and images are being uploaded to prevent duplicate submissions. 
●	Handle post update success: Close the modal and refresh the post list automatically after successful post update. Display success message "Cập nhật bài viết thành công" (Post updated successfully). Updated post appears with 'pending' status if changes were made. 
●	Handle post update errors: Display error messages if post update fails, such as "Có lỗi xảy ra khi cập nhật bài đăng" (An error occurred while updating the post), "Không tìm thấy bài viết" (Post not found), or permission errors. 
On the screen, user can also: 
●	Navigate between different sections: Access other functions through the sidebar navigation depending on user role (parent, teacher, or school admin). 
●	View user information: See current user details and role in the top navigation bar. 
Field Name 	Description 
(1) Post ID 	Data type: ObjectId. Retrieved from post card action menu (post._id) and used to identify which post to update. Passed as URL parameter in PUT request to /api/posts/:postId endpoint. 
(2) Post Content 	Data type: string, required field, max length suitable for post content. Pre-filled from post.content in database and displayed in multi-line text area. Can be edited by user. Retrieved from request body content field and saved to post.content in database. Must not be empty, validation error displayed if empty on submit. 
(3) Images 	Data type: array of image URLs (for existing images) or base64 strings (for new images) for image data, positive integer for image count. Existing images loaded from PostImage.find({ post_id }) and displayed as thumbnail previews. New images selected through file picker with multiple selection enabled, accept="image/*". New images are converted to base64 for preview, then uploaded to Cloudinary storage. All images (existing URLs and newly uploaded URLs) are saved as PostImage records with post_id and image_url. Image count is calculated from images array length and displayed in label "Thêm ảnh ({count})" to show number of images (e.g., "Thêm ảnh (1)"). Images are displayed as thumbnail previews with count indicator. Each image can be removed individually before submission. Image count updates dynamically as images are added or removed. 
(4) Post Status 	Data type: string, enum values ('pending', 'approved'). Automatically changed to 'pending' when post content or images are modified to require re-approval. Remains unchanged if no modifications are detected. Saved to post.status in database. 
(5) User ID 	Data type: ObjectId. Retrieved from authenticated user session (req.user.id) and compared with post.user_id to verify edit permissions. User can only edit posts they own. 
(6) Updated At 	Data type: date. Automatically updated to current timestamp when post is successfully updated. Saved to post.updatedAt in database (if timestamps enabled) or post.create_at remains unchanged.

